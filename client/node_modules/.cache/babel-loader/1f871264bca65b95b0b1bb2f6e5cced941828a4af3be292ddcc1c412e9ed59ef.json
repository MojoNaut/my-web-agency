{"ast":null,"code":"import React,{useEffect,useRef}from'react';import{preloadImages}from'./utils';import'./StickySections.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const services=[{title:'BRAND VIDEO',description:\"Racconti chi sei, cosa fai, perch\\xE9 esisti.\\nVideo per presentare l'azienda, comunicare valori, costruire fiducia.\\nEsterno (clienti) o interno (team, investitori).\",tags:['Video manifesto','Company profile','Brand stories'],videoSrc:'https://kota-content.b-cdn.net/app/uploads/2024/02/homepage.mp4'},{title:'PRODUCT VIDEO',description:\"Mostri cosa vendi e perch\\xE9 vale la pena sceglierti.\\nDemo, showcase, cataloghi digitali, e-commerce.\\nFashion, food, design, industriale.\",tags:['Demo prodotto','Fashion films','Food & Beverage'],videoSrc:'https://kota-content.b-cdn.net/app/uploads/2024/02/homepage.mp4'},{title:'SOCIAL CONTENT',description:\"VContenuti verticali che fermano lo scroll.\\nInstagram Reels, TikTok, Facebook Stories.\\n15-60 secondi, formato 9:16, pronti per pubblicare.\",tags:['Vertical stories','Campaign videos','Social content'],videoSrc:'https://kota-content.b-cdn.net/app/uploads/2024/02/homepage.mp4'}];const StickySections=()=>{const containerRef=useRef(null);const lenisRef=useRef(null);useEffect(()=>{if(!window.gsap||!window.ScrollTrigger||!window.Lenis){console.error('Librerie mancanti! Assicurati che siano caricate in index.html');return;}const{gsap}=window;const{ScrollTrigger}=window;const Lenis=window.Lenis;gsap.registerPlugin(ScrollTrigger);const initSmoothScrolling=()=>{lenisRef.current=new Lenis({lerp:0.2,smoothWheel:true});lenisRef.current.on('scroll',()=>ScrollTrigger.update());const scrollFn=time=>{var _lenisRef$current;(_lenisRef$current=lenisRef.current)===null||_lenisRef$current===void 0?void 0:_lenisRef$current.raf(time);requestAnimationFrame(scrollFn);};requestAnimationFrame(scrollFn);};const initScrollAnimations=()=>{const contentElements=gsap.utils.toArray('.content--sticky');contentElements.forEach(el=>{gsap.timeline({scrollTrigger:{trigger:el,start:'center center',end:'max',scrub:true}}).to(el,{ease:'none',scale:0.4,yPercent:-50},0);});};const init=async()=>{var _containerRef$current;document.body.classList.add('loading');await preloadImages('.content__img, video');document.body.classList.remove('loading');initSmoothScrolling();initScrollAnimations();const videos=(_containerRef$current=containerRef.current)===null||_containerRef$current===void 0?void 0:_containerRef$current.querySelectorAll('video');videos===null||videos===void 0?void 0:videos.forEach(video=>{const tryPlay=()=>{if(video.readyState>=3){video.play().catch(err=>{console.warn('Autoplay fallito. Mostro poster fallback.',err);video.poster='https://via.placeholder.com/800x450?text=Video+Unavailable';});}else{video.addEventListener('canplay',tryPlay,{once:true});}};tryPlay();});};init();return()=>{var _lenisRef$current2;(_lenisRef$current2=lenisRef.current)===null||_lenisRef$current2===void 0?void 0:_lenisRef$current2.destroy();ScrollTrigger.getAll().forEach(trigger=>trigger.kill());};},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"demo8-wrapper\",ref:containerRef,children:/*#__PURE__*/_jsx(\"div\",{className:\"wrap\",children:services.map((service,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"content content--sticky content--card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content__inner\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content__text-wrapper\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"content__title\",children:service.title}),/*#__PURE__*/_jsx(\"p\",{className:\"content__text text-meta\",children:service.description.split('\\n').map((line,i)=>/*#__PURE__*/_jsxs(\"span\",{children:[line,/*#__PURE__*/_jsx(\"br\",{})]},i))}),/*#__PURE__*/_jsx(\"div\",{className:\"content__tags\",children:service.tags.map((tag,i)=>/*#__PURE__*/_jsx(\"span\",{className:\"tag tag-\".concat(index),children:tag},i))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"content__media\",children:/*#__PURE__*/_jsx(\"video\",{className:\"content__video\",loop:true,muted:true,playsInline:true,autoPlay:true,children:/*#__PURE__*/_jsx(\"source\",{src:service.videoSrc,type:\"video/mp4\"})})})]})},index))})});};export default StickySections;","map":{"version":3,"names":["React","useEffect","useRef","preloadImages","jsx","_jsx","jsxs","_jsxs","services","title","description","tags","videoSrc","StickySections","containerRef","lenisRef","window","gsap","ScrollTrigger","Lenis","console","error","registerPlugin","initSmoothScrolling","current","lerp","smoothWheel","on","update","scrollFn","time","_lenisRef$current","raf","requestAnimationFrame","initScrollAnimations","contentElements","utils","toArray","forEach","el","timeline","scrollTrigger","trigger","start","end","scrub","to","ease","scale","yPercent","init","_containerRef$current","document","body","classList","add","remove","videos","querySelectorAll","video","tryPlay","readyState","play","catch","err","warn","poster","addEventListener","once","_lenisRef$current2","destroy","getAll","kill","className","ref","children","map","service","index","split","line","i","tag","concat","loop","muted","playsInline","autoPlay","src","type"],"sources":["/Users/mojonaut/Desktop/DotShips/my-web-agency/client/src/components/StickySections/index.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { preloadImages } from './utils';\nimport './StickySections.css';\n\nconst services = [\n  {\n    title: 'BRAND VIDEO',\n    description: `Racconti chi sei, cosa fai, perché esisti.\nVideo per presentare l'azienda, comunicare valori, costruire fiducia.\nEsterno (clienti) o interno (team, investitori).`,\n    tags: ['Video manifesto', 'Company profile', 'Brand stories'],\n    videoSrc: 'https://kota-content.b-cdn.net/app/uploads/2024/02/homepage.mp4'\n  },\n  {\n    title: 'PRODUCT VIDEO',\n    description: `Mostri cosa vendi e perché vale la pena sceglierti.\nDemo, showcase, cataloghi digitali, e-commerce.\nFashion, food, design, industriale.`,\n    tags: ['Demo prodotto', 'Fashion films', 'Food & Beverage'],\n    videoSrc: 'https://kota-content.b-cdn.net/app/uploads/2024/02/homepage.mp4'\n  },\n  {\n    title: 'SOCIAL CONTENT',\n    description: `VContenuti verticali che fermano lo scroll.\nInstagram Reels, TikTok, Facebook Stories.\n15-60 secondi, formato 9:16, pronti per pubblicare.`,\n    tags: ['Vertical stories', 'Campaign videos', 'Social content'],\n    videoSrc: 'https://kota-content.b-cdn.net/app/uploads/2024/02/homepage.mp4'\n  }\n];\n\nconst StickySections = () => {\n  const containerRef = useRef(null);\n  const lenisRef = useRef(null);\n\n  useEffect(() => {\n    if (!window.gsap || !window.ScrollTrigger || !window.Lenis) {\n      console.error('Librerie mancanti! Assicurati che siano caricate in index.html');\n      return;\n    }\n\n    const { gsap } = window;\n    const { ScrollTrigger } = window;\n    const Lenis = window.Lenis;\n\n    gsap.registerPlugin(ScrollTrigger);\n\n    const initSmoothScrolling = () => {\n      lenisRef.current = new Lenis({\n        lerp: 0.2,\n        smoothWheel: true\n      });\n\n      lenisRef.current.on('scroll', () => ScrollTrigger.update());\n\n      const scrollFn = (time) => {\n        lenisRef.current?.raf(time);\n        requestAnimationFrame(scrollFn);\n      };\n      requestAnimationFrame(scrollFn);\n    };\n\n    const initScrollAnimations = () => {\n      const contentElements = gsap.utils.toArray('.content--sticky');\n\n      contentElements.forEach(el => {\n      gsap.timeline({\n  scrollTrigger: {\n    trigger: el,\n    start: 'center center',\n    end: 'max', \n    scrub: true\n  }\n})\n.to(el, {\n  ease: 'none',\n  scale: 0.4,\n  yPercent: -50\n}, 0);\n\n      });\n    };\n\n    const init = async () => {\n      document.body.classList.add('loading');\n      await preloadImages('.content__img, video');\n      document.body.classList.remove('loading');\n      initSmoothScrolling();\n      initScrollAnimations();\n\n      const videos = containerRef.current?.querySelectorAll('video');\n      videos?.forEach(video => {\n        const tryPlay = () => {\n          if (video.readyState >= 3) {\n            video.play().catch(err => {\n              console.warn('Autoplay fallito. Mostro poster fallback.', err);\n              video.poster = 'https://via.placeholder.com/800x450?text=Video+Unavailable';\n            });\n          } else {\n            video.addEventListener('canplay', tryPlay, { once: true });\n          }\n        };\n        tryPlay();\n      });\n    };\n\n    init();\n\n    return () => {\n      lenisRef.current?.destroy();\n      ScrollTrigger.getAll().forEach(trigger => trigger.kill());\n    };\n  }, []);\n\n  return (\n    <div className=\"demo8-wrapper\" ref={containerRef}>\n      <div className=\"wrap\">\n        {services.map((service, index) => (\n          <div className=\"content content--sticky content--card\" key={index}>\n            <div className=\"content__inner\">\n              <div className=\"content__text-wrapper\">\n                <h2 className=\"content__title\">{service.title}</h2>\n                <p className=\"content__text text-meta\">\n                  {service.description.split('\\n').map((line, i) => (\n                    <span key={i}>\n                      {line}\n                      <br />\n                    </span>\n                  ))}\n                </p>\n                <div className=\"content__tags\">\n               {service.tags.map((tag, i) => (\n  <span className={`tag tag-${index}`} key={i}>{tag}</span>\n))}\n\n                </div>\n                \n              </div>\n              <div className=\"content__media\">\n                <video \n                  className=\"content__video\" \n                  loop \n                  muted \n                  playsInline \n                  autoPlay\n                >\n                  <source src={service.videoSrc} type=\"video/mp4\" />\n                </video>\n              </div>\n            </div>\n          </div>\n        ))}\n\n      \n     \n      </div>\n    </div>\n  );\n};\n\nexport default StickySections;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}